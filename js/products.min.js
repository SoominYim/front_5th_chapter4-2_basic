async function loadProducts() {
  try {
    const e = await fetch("https://fakestoreapi.com/products");
    if (!e.ok) throw new Error("Failed to fetch products");
    const t = await e.json();
    displayProducts(t.slice(0, 6));
  } catch (e) {
    console.error("Error loading products:", e);
  }
}
function displayProducts(e) {
  const t = document.querySelector("#all-products .container");
  if (!t) return;
  const n = document.createDocumentFragment();
  e.forEach(e => {
    const t = document.createElement("div");
    t.classList.add("product");
    const o = document.createElement("div");
    o.classList.add("product-picture");
    const c = document.createElement("img");
    (c.src = e.image),
      (c.alt = `${e.title} - ${e.category}`),
      (c.width = 250),
      (c.height = 200),
      (c.loading = "lazy"),
      o.appendChild(c);
    const r = document.createElement("div");
    r.classList.add("product-info");
    const d = document.createElement("h4");
    d.classList.add("categories"), (d.textContent = e.category);
    const a = document.createElement("h3");
    a.classList.add("title"), (a.textContent = e.title.length > 30 ? e.title.substring(0, 30) + "..." : e.title);
    const l = document.createElement("div");
    l.classList.add("price");
    const s = document.createElement("span");
    (s.textContent = `US$ ${e.price.toFixed(2)}`), l.appendChild(s);
    const i = document.createElement("button");
    (i.textContent = "Add to bag"),
      i.setAttribute("aria-label", `Add ${e.title} to shopping bag`),
      r.appendChild(d),
      r.appendChild(a),
      r.appendChild(l),
      r.appendChild(i),
      t.appendChild(o),
      t.appendChild(r),
      n.appendChild(t);
  }),
    t.appendChild(n);
}
loadProducts();
